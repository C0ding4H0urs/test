<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Main CC | YAGPDB Custom Commands</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://yagpdb-cc.github.io/giveaway/compressed/main-cc"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Main CC | YAGPDB Custom Commands"><meta data-react-helmet="true" name="description" content="This command allows administrators to manage giveaways. Supports invocation via execCC as well."><meta data-react-helmet="true" property="og:description" content="This command allows administrators to manage giveaways. Supports invocation via execCC as well."><link data-react-helmet="true" rel="shortcut icon" href="/img/yag.ico"><link data-react-helmet="true" rel="canonical" href="https://yagpdb-cc.github.io/giveaway/compressed/main-cc"><link data-react-helmet="true" rel="alternate" href="https://yagpdb-cc.github.io/giveaway/compressed/main-cc" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://yagpdb-cc.github.io/giveaway/compressed/main-cc" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.10a8df27.css">
<link rel="preload" href="/assets/js/runtime~main.faac80f8.js" as="script">
<link rel="preload" href="/assets/js/main.0bbf4581.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/yag.ico" alt="YAGPDB logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/yag.ico" alt="YAGPDB logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">YAGPDB Custom Commands</b></a><a class="navbar__item navbar__link navbar__link--active" href="/">Introduction</a><a class="navbar__item navbar__link navbar__link--active" href="/adding-ccs">Adding custom commands</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/yagpdb-cc/yagpdb-cc/tree/master" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--checked react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">üåô</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">‚òÄÔ∏è</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/adding-ccs">Adding Custom Commands</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">AFK System</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Birthday System</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Code Snippets</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Fun Commands</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Giveaway System</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/giveaway/overview">Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Basic v2</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Basic</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Compressed</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/giveaway/compressed/overview">Overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/giveaway/compressed/main-cc">Main CC</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/giveaway/compressed/reaction-handler">Reaction Handler</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Informational Commands</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Leveling System</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Moderation Commands</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Suggestion System</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tag System</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Utility Commands</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Main CC</h1></header><p>This command allows administrators to manage giveaways. Supports invocation via <code>execCC</code> as well.</p><p>For more information about this particular version of the giveaway package, see <a href="/giveaway/compressed/overview">this</a> page.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="trigger"></a>Trigger<a class="hash-link" href="#trigger" title="Direct link to heading">#</a></h2><p><strong>Type:</strong> <code>Command</code><br>
<strong>Trigger:</strong> <code>giveaway</code></p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Unless you would like everyone to be able to manage giveaways, we advise that you restrict this command to a staff role in the role restrictions.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="usage"></a>Usage<a class="hash-link" href="#usage" title="Direct link to heading">#</a></h2><p>See the <a href="/giveaway/compressed/overview#usage">giveaway package overview</a> for more information about how to use this command.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="configuration"></a>Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">#</a></h2><p>Again, see the <a href="/giveaway/compressed/overview#configuration">giveaway package overview</a> for more information about how to configure this command.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="code"></a>Code<a class="hash-link" href="#code" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W gotmpl"><pre tabindex="0" class="prism-code language-gotmpl codeBlock_6upA thin-scrollbar" style="color:#b3b1ad;background-color:#191F26"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$gEmoji:=`&lt;:yag:277569741932068864&gt;`}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{/*Code*/}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$rEmoji:=reReplace `\A&lt;|&gt;\z` $gEmoji &quot;&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$syntaxError:=0}}{{$CmdArgs:=cslice}}{{$StrippedMsg:=&quot;&quot;}}{{$Cmd:=&quot;&quot;}}{{$ExecData:=0}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if not .ExecData}}{{$CmdArgs =.CmdArgs}}{{$StrippedMsg =reReplace `\A\s+|\s+\z` .StrippedMsg &quot;&quot;}}{{$Cmd =.Cmd}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else if toInt .ExecData}}{{$ExecData =str .ExecData}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else if eq (printf &quot;%T&quot; .ExecData) &quot;string&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$args:=split .ExecData &quot; &quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if gt (len $args) 1}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$StrippedMsg =reReplace `\A\s+|\s+\z` (joinStr &quot; &quot; (slice $args 1)) &quot;&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$Cmd =index $args 0}}{{range reFindAllSubmatches `\x60(|.*?[^\\])\x60|&quot;(|.*?[^\\])&quot;|(\S+)` $StrippedMsg}}{{$CmdArgs =$CmdArgs.Append (or (index . 1) (index . 2) (index . 3))}}{{end}}{{$CmdArgs =$CmdArgs.StringSlice}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if not $ExecData}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if gt (len $CmdArgs) 0}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$subCmd:=lower (index $CmdArgs 0)}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if or (gt (len $CmdArgs) 1) (eq $subCmd &quot;list&quot;) (eq $subCmd &quot;reroll&quot;)}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if eq $subCmd &quot;start&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$CmdArgs:=reReplace (print `(?i)\A` $subCmd `\s*`) $StrippedMsg &quot;&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$maxP:=-1}}{{$maxW:=1}}{{$chan:=.Channel.ID}}{{$ID:=&quot;&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$uID:=toInt (currentTime.Sub (newDate 2019 10 10 0 0 0)).Seconds}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{with reFindAllSubmatches `(?i)-w (\d+)(?:\s+|\z)` $CmdArgs}}{{$CmdArgs =reReplace (index . 0 0) $CmdArgs &quot;&quot;}}{{$maxW =toInt (index . 0 1)}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{with reFindAllSubmatches `(?i)-p (\d+)(?:\s+|\z)` $CmdArgs}}{{$CmdArgs =reReplace (index . 0 0) $CmdArgs &quot;&quot;}}{{$maxP =toInt (index . 0 1)}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{with reFindAllSubmatches `(?i)(-c (?:&lt;#)?(\d+)&gt;?(?:\s+|$))` $CmdArgs}}{{$CmdArgs =reReplace (index . 0 0) $CmdArgs &quot;&quot;}}{{$chan =index . 0 2}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$temp:=split $CmdArgs &quot; &quot;}}{{$duration:=toDuration (index $temp 0)}}{{$prize:=&quot;&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if gt (len $temp) 1}}{{$prize =joinStr &quot; &quot; (slice $temp 1)}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$prize =reReplace `\A\s+|\s+\z` $prize &quot;&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if and $duration $prize}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if or (ge $maxP $maxW) (eq $maxP -1)}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{with sendMessageNoEscapeRetID $chan (cembed &quot;title&quot; &quot;loading...&quot;)}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$ID =joinStr &quot;&quot; $chan .}}{{$giveawaySdict:=sdict &quot;chan&quot; $chan &quot;count&quot; 0 &quot;ID&quot; $ID &quot;listID&quot; &quot;&quot; &quot;maxWinners&quot; $maxW &quot;maxParticipants&quot; $maxP &quot;expiresAt&quot; (currentTime.Add $duration) &quot;prize&quot; $prize &quot;uID&quot; $uID &quot;host&quot; $.User.Mention}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{addMessageReactions $chan . $rEmoji}}{{$desc:=print `&gt;&gt;&gt; **Prize : **` $prize &quot;\n\n&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if gt $maxW 0}}{{$desc =print $desc &quot;**Max Winners :** &quot; $maxW}}{{end}}{{if gt $maxP 0}}{{$desc =print $desc &quot;‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä**Max Participants :** &quot; $maxP}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$desc =print $desc &quot;\n\n**Hosted By :** &quot; $.User.Mention &quot;\n\n**React with &quot; $gEmoji &quot; to enter GiveAway **&quot;}}{{editMessage $chan . (cembed &quot;title&quot; &quot;üåüüåü**GiveAway Started !!**üåüüåü&quot; &quot;description&quot; $desc &quot;color&quot; 16763170 &quot;footer&quot; (sdict &quot;text&quot; (print &quot;ID: &quot; $uID &quot; | GiveAway Ends &quot;)) &quot;timestamp&quot; $giveawaySdict.expiresAt)}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$dbData:=sdict (or (dbGet 7777 &quot;giveaway_active&quot;).Value sdict)}}{{$dbData.Set $ID $giveawaySdict}}{{dbSet 7777 &quot;giveaway_active&quot; $dbData}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$dbData =sdict (or (dbGet 7777 &quot;giveaway_active_IDs&quot;).Value sdict)}}{{$dbData.Set (str $uID) $ID}}{{dbSet 7777 &quot;giveaway_active_IDs&quot; $dbData}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{scheduleUniqueCC $.CCID $chan $duration.Seconds $uID $ID}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">**Invalid Channel !!**</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">**Error:** Max Winners cannot be more than Max Participants!!</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">**Error:** Invalid Duration or Prize !!</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else if eq $subCmd &quot;end&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$uID:=index $CmdArgs 1}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{with (dbGet 7777 &quot;giveaway_active&quot;).Value}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$ID:=index (dbGet 7777 &quot;giveaway_active_IDs&quot;).Value $uID}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{with (index . (str $ID))}}{{cancelScheduledUniqueCC $.CCID .uID}}{{$s:=sendTemplate .chan &quot;g_end&quot; &quot;ID&quot; (str $ID)}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">**Error:** Invalid ID ``{{$uID}}``</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">**Error:** No Active Giveaways.</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else if eq $subCmd &quot;cancel&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$uID:=index $CmdArgs 1}}{{$ID:=0}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{with (dbGet 7777 &quot;giveaway_active&quot;).Value}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$dbID:=(dbGet 7777 &quot;giveaway_active_IDs&quot;).Value}}{{$ID =index $dbID $uID}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{with index . (str $ID)}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$chan:=.chan}}{{$prize:=.prize}}{{$host:=.host}}{{cancelScheduledUniqueCC $.CCID .uID}}{{$msg:=index (split $ID (str $chan)) 1}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{with getMessage $chan $msg}}{{editMessage $chan $msg (cembed &quot;title&quot; &quot;üåüüåü**GiveAway Cancelled !!**üåüüåü&quot; &quot;description&quot; (print &quot;&gt;&gt;&gt; **Prize :** &quot; $prize &quot;\n\n**Hosted By : **&quot; $host) &quot;footer&quot; (sdict &quot;text&quot; &quot;Giveaway Cancelled&quot;) &quot;color&quot; 12257822)}}{{end}}Done!</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">**Error:** Invalid ID ``{{$uID}}``</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if $ID}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$newdbData:=sdict .}}{{$newdbData.Del $ID}}{{dbSet 7777 &quot;giveaway_active&quot; $newdbData}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$newdbData =sdict $dbID}}{{$newdbData.Del $uID}}{{dbSet 7777 &quot;giveaway_active_IDs&quot; $newdbData}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">**Error:** No Active Giveaways.</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else if eq $subCmd &quot;reroll&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$ID:=1}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if gt (len $CmdArgs) 1}}{{$ID =toInt (index $CmdArgs 1)}}{{end}}{{$found:=false}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if ($e:=(dbGet 7777 &quot;giveaway_old&quot;).Value)}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{range $i,$v:=$e}}{{if or (eq (sub (len $e) $i) $ID) (eq (toInt $v.uID) $ID)}}{{$found =true}}{{$s:=sendTemplate $v.chan &quot;g_end&quot; &quot;ID&quot; (str $v.ID) &quot;Data&quot; $v}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if not $found}}**Error** - Invalid Argument `{{index $CmdArgs 1}}`. Old Giveaway with corresponding ID or Position(1-10) not found!{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">**Error:** No Old Giveaways.</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else if eq $subCmd &quot;list&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{with (dbGet 7777 &quot;giveaway_active&quot;).Value}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$count:=0}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{range $k,$v:=.}}{{$count =add $count 1}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$count}}) **ID:** ``{{$v.uID}}``  **Prize:** ``{{$v.prize}}``</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">**Ends AT:** ``{{formatTime $v.expiresAt}}``</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">No Active Giveaways.</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$syntaxError =1}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$syntaxError =1}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$syntaxError =1}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$s:=sendTemplate nil &quot;g_end&quot; &quot;ID&quot; $ExecData}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{define &quot;g_end&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$ID:=.TemplateArgs.ID}}{{$dbData:=(dbGet 7777 &quot;giveaway_active&quot;).Value}}{{with .TemplateArgs.Data}}{{$dbData =sdict (str $ID) .}}{{end}}{{$chan:=(index $dbData $ID).chan}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if $dbData}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{with index $dbData $ID}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$countWinners:=toInt .maxWinners}}{{$count:=toInt .count}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if lt $count $countWinners}}{{$countWinners =$count}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$msg:=index (split $ID (str $chan)) 1}}{{$listID:=.listID}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if and (gt $count .maxParticipants) (gt .maxParticipants 0)}}{{$count =.maxParticipants}}{{$listID =joinStr &quot;,&quot; (slice (split $listID &quot;,&quot;) 0 $count) &quot;&quot;}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$winnerList:=&quot;&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{range seq 0 $countWinners}}{{$winner:=index (split $listID &quot;,&quot;) (randInt 0 $count)}}{{$listID =reReplace (print $winner &quot;,&quot;) $listID &quot;&quot;}}{{$count =add $count -1}}{{$winnerList =(print $winnerList &quot;&lt;@&quot; $winner &quot;&gt; &quot;)}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$desc:=print &quot;&gt;&gt;&gt; **Prize :** &quot; .prize &quot;\n\n**Winners :** &quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if $countWinners}}{{$desc =print $desc $winnerList}}{{else}}{{$desc =print $desc &quot;No Participants :( &quot;}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$desc:=print $desc &quot;\n\n**Hosted By :** &quot; .host}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{with getMessage $chan $msg}}{{editMessage $chan $msg (cembed &quot;title&quot; &quot;üåüüåü**GiveAway Ended !!**üåüüåü&quot; &quot;description&quot; $desc &quot;footer&quot; (sdict &quot;text&quot; &quot;Giveaway Ended at &quot;) &quot;timestamp&quot; currentTime &quot;color&quot; 12257822)}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if $countWinners}}{{sendMessage nil (print &quot;**Prize :** &quot; .prize &quot;\n**Winner(s) :** &quot; $winnerList)}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">**Giveaway Ended, No participants :( !!**</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">**Prize : {{.prize}}**</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if not $.TemplateArgs.Data}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$newdbData:=sdict $dbData}}{{$newdbData.Del $ID}}{{dbSet 7777 &quot;giveaway_active&quot; $newdbData}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$newdbData =sdict (dbGet 7777 &quot;giveaway_active_IDs&quot;).Value}}{{$newdbData.Del (str .uID)}}{{dbSet 7777 &quot;giveaway_active_IDs&quot; $newdbData}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$old:=cslice.AppendSlice (or (dbGet 7777 &quot;giveaway_old&quot;).Value cslice)}}{{if gt (len $old) 9}}{{$old =slice $old 1}}{{end}}{{dbSet 7777 &quot;giveaway_old&quot; ($old.Append .)}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else}}`Warning:` Invoked CC : {{$.CCID}} using ExecCC with invalid Giveaway ID.</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else}}`Warning:` Invoked CC : {{$.CCID}} using ExecCC with no active Giveaways.</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if $syntaxError}}{{sendMessage nil (print &quot;__**Incorrect Syntax** __ \n**Commands are :** \n```elm\n&quot; ($Cmd) &quot; start &lt;time : Duration&gt; &lt;prize : String&gt; \n\noptional_flags \n-p (max participants : Number) \n-w (max winners : Number)\n-c (channel : Mention/ID)\n```\n```elm\n&quot; ($Cmd) &quot; end &lt;id : Number&gt;```\n```elm\n&quot; ($Cmd) &quot; cancel &lt;id : Number&gt;```\n```elm\n&quot; ($Cmd) &quot; reroll [id or n giveaways old : Number]```\n```elm\n&quot; ($Cmd) &quot; list ``` &quot;)}}{{end}}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="author"></a>Author<a class="hash-link" href="#author" title="Direct link to heading">#</a></h2><p>This custom command was written by <a href="https://github.com/Satty9361" target="_blank" rel="noopener noreferrer">@Satty9361</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/yagpdb-cc/yagpdb-cc/edit/master/website/docs/giveaway/compressed/main-cc.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/giveaway/compressed/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/giveaway/compressed/reaction-handler"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Reaction Handler ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#trigger" class="table-of-contents__link">Trigger</a></li><li><a href="#usage" class="table-of-contents__link">Usage</a></li><li><a href="#configuration" class="table-of-contents__link">Configuration</a></li><li><a href="#code" class="table-of-contents__link">Code</a></li><li><a href="#author" class="table-of-contents__link">Author</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">YAGPDB CCs</a></li><li class="footer__item"><a href="https://docs.yagpdb.xyz" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://learn.yagpdb.xyz" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Learning Center<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/jonas747/yagpdb" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>YAGPDB Source<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.com/invite/4udtcA5" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>YAGPDB Community Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/yagpdb-cc/yagpdb-cc" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>YAGPDB CC GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://reddit.com/r/YAGPDB" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>YAGPDB Subreddit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 YAGPDB-CC contributors under the MIT license.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.faac80f8.js"></script>
<script src="/assets/js/main.0bbf4581.js"></script>
</body>
</html>