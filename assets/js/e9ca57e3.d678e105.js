"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1871],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return y}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=d(n),c=r,y=u["".concat(s,".").concat(c)]||u[c]||m[c]||i;return n?a.createElement(y,o(o({ref:t},p),{},{components:n})):a.createElement(y,o({ref:t},p))}));function y(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:r,o[1]=l;for(var d=2;d<i;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},7848:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return o},default:function(){return m},frontMatter:function(){return i},metadata:function(){return l},toc:function(){return d}});var a=n(3117),r=(n(7294),n(3905));const i={title:"Overview"},o=void 0,l={unversionedId:"birthday/overview",id:"birthday/overview",title:"Overview",description:"This custom command adds birthday functionality to your server, wishing members all the best on their respective date.",source:"@site/docs/birthday/overview.md",sourceDirName:"birthday",slug:"/birthday/overview",permalink:"/birthday/overview",draft:!1,editUrl:"https://github.com/yagpdb-cc/yagpdb-cc/edit/master/website/docs/birthday/overview.md",tags:[],version:"current",frontMatter:{title:"Overview"},sidebar:"sidebar",previous:{title:"Main CC",permalink:"/afk/main-cc"},next:{title:"Main CC",permalink:"/birthday/main-cc"}},s={},d=[{value:"Features",id:"features",level:2},{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2},{value:"List of configurable values",id:"list-of-configurable-values",level:3},{value:"Commands",id:"commands",level:2},{value:"Updating",id:"updating",level:2},{value:"Author",id:"author",level:2}],p={toc:d},u="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This custom command adds birthday functionality to your server, wishing members all the best on their respective date."),(0,r.kt)("h2",{id:"features"},"Features"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Send a configurable message in the chat on birthdays"),(0,r.kt)("li",{parentName:"ul"},"Kick or ban users younger than 13 years"),(0,r.kt)("li",{parentName:"ul"},"Allow users to set their birthday date"),(0,r.kt)("li",{parentName:"ul"},"Allow staff to edit/remove birthdays")),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("p",null,"As usual, there are instructions describing where to put the script and which trigger to use on the pages corresponding to the individual commands.\nAdditionally, we've documented how and where to add this script down below."),(0,r.kt)("admonition",{title:"Updating to v2",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"If you instead want to update to v2, because you used an older version, please click ",(0,r.kt)("a",{parentName:"p",href:"overview#updating"},"here"),".")),(0,r.kt)("p",null,"Add the only command, ",(0,r.kt)("a",{parentName:"p",href:"main-cc"},"birthday")," as a new custom command. The trigger is going to be a Regex type with the value ",(0,r.kt)("inlineCode",{parentName:"p"},"\\A\\-(my|start|stop|set|get|del)b(irth)?days?"),"."),(0,r.kt)("h2",{id:"configuration"},"Configuration"),(0,r.kt)("p",null,"Before your birthday custom command is ready to go, you still need to configure a few things. Please read carefully through their description before changing anything."),(0,r.kt)("h3",{id:"list-of-configurable-values"},"List of configurable values"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\ud83d\udccc ",(0,r.kt)("inlineCode",{parentName:"p"},"$mods"),(0,r.kt)("br",null),"\nList of role IDs you consider moderator. Separate multiple role IDs by spaces.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\ud83d\udccc ",(0,r.kt)("inlineCode",{parentName:"p"},"$channelID"),(0,r.kt)("br",null),"\nThe channel that birthday messages should be sent in.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"$bdayMsg"),(0,r.kt)("br",null),"\nThis variable defines the message that'll be sent on a member's birthday.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"$invertedOrder"),(0,r.kt)("br",null),"\nDate format to use. If set to to ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),", YAGPDB will use the american notation ",(0,r.kt)("inlineCode",{parentName:"p"},"mm/dd/yyyy")," instead of ",(0,r.kt)("inlineCode",{parentName:"p"},"dd/mm/yyyy"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"$yearOptional"),(0,r.kt)("br",null),"\nWhether the year is optional when configuring birthdays; set to ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," to enable. This will make the year default to ",(0,r.kt)("inlineCode",{parentName:"p"},"2000"),", if a member does not give a year upon configuring their birthday.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"$kickUnderAge"),(0,r.kt)("br",null),"\nWhether to kick users younger than 13 years old; set to ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," to enable.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"$banUnderAge"),(0,r.kt)("br",null),"\nSame as above, but will instead ban users younger than 13 years old"))),(0,r.kt)("p",null,"After you've configured all those variables, save again."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Your birthday system is now ready to use!")),(0,r.kt)("h2",{id:"commands"},"Commands"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"All commands can be used with ",(0,r.kt)("inlineCode",{parentName:"p"},"bday")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"birthday"),", such as ",(0,r.kt)("inlineCode",{parentName:"p"},"-getbday")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"-getbirthday"),".")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"mybirthday"),(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"Syntax:")," ",(0,r.kt)("inlineCode",{parentName:"p"},"mybirthday dd/mm/yyyy")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"mybirthday mm/dd/yyyy"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Use:")," Set your birthday to the given date. Note that if ",(0,r.kt)("inlineCode",{parentName:"p"},"$invertedOrder")," is true, you'd have to use the latter version, as it now uses american date notation.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"startbirthday"),(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"Syntax:")," ",(0,r.kt)("inlineCode",{parentName:"p"},"starbirthday [duration]"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Use:")," Start announcing birthdays at the time of executing this command. Provide an optional duration to fine-tune the timing.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"stopbirthday"),(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"Syntax:")," ",(0,r.kt)("inlineCode",{parentName:"p"},"stopbirthday"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Use:")," Stops announcing birthdays immediately.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"setbirthday"),(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"Syntax:")," ",(0,r.kt)("inlineCode",{parentName:"p"},"setbirthday <date> <user>"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Use:")," Set the birthday date of the mentioned user. Can only be used by users with at least one role in ",(0,r.kt)("inlineCode",{parentName:"p"},"$mods"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"getbirthday"),(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"Syntax:")," ",(0,r.kt)("inlineCode",{parentName:"p"},"getbirthday <user>"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Use:")," Get the birthday of the mentioned user.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"delbirthday"),(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"Syntax:")," ",(0,r.kt)("inlineCode",{parentName:"p"},"delbirthday <user>"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Use:")," Delete the set birthday of the mentioned user. Can only be used by users with at least one role in ",(0,r.kt)("inlineCode",{parentName:"p"},"$mods"),"."))),(0,r.kt)("h2",{id:"updating"},"Updating"),(0,r.kt)("p",null,"As the first version had some flaws, such as congratulating a member more than once, we highly recommend updating to v2. To do that, please follow the steps below."),(0,r.kt)("admonition",{type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"This will erase all set birthdays. Your members will have to set them up again.")),(0,r.kt)("p",null,"Add this script as a new custom command with any trigger you like, such as a command trigger with ",(0,r.kt)("inlineCode",{parentName:"p"},"update"),". After that, just run it."),(0,r.kt)("p",null,"Once that is done, YAGPDB will respond with ",(0,r.kt)("inlineCode",{parentName:"p"},"All set, you can now use V2.0"),"."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"You may now install the latest version as described above.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-gotmpl"},'{{with .ExecData}}\n    {{if eq . "1"}}\n        {{range seq 0 10}}\n            {{dbDel . "bdays"}}\n        {{end}}\n        {{execCC $.CCID nil 2 "2"}}\n    {{else if eq . "2"}}\n        {{range seq 9 13}}\n            {{dbDel . "bdays"}}\n        {{end}}\n        {{execCC $.CCID nil 3 "3"}}\n    {{else if eq . "3"}}\n        Still running deletation...\n        {{$day := currentTime.Day}}\n        {{range seq (sub $day 3) (add $day 3)}}\n            {{dbDel . "bdayannounced"}}\n        {{end}}\n        {{execCC $.CCID nil 4 "4"}}\n    {{else if eq . "4"}}\n        {{$entries := dbTopEntries "bday" 9 0}}\n        {{if not $entries}}\n            All set, you can now use V2.0\n        {{else}}\n            {{range $entries}}\n                {{dbDel .UserID "bday"}}\n            {{end}}\n            {{if le (len $entries) 9}}\n                All set, you can now use V2.0\n            {{else}}\n                {{execCC $.CCID nil 5 "5"}}\n            {{end}}\n        {{end}}\n    {{else}}\n        {{$entries := dbTopEntries "bday" 9 0}}\n        {{if not $entries}}\n            All set, you can now use V2.0\n        {{else}}\n            {{range $entries}}\n                {{dbDel .UserID "bday"}}\n            {{end}}\n            {{execCC $.CCID nil 5 "5"}}\n        {{end}}\n    {{end}}\n{{else}}\n    Please wait... deletion is in progress.\n    {{execCC .CCID nil 1 "1"}}\n{{end}}\n')),(0,r.kt)("h2",{id:"author"},"Author"),(0,r.kt)("p",null,"This custom command system was written by ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/Pedro-Pessoa"},"@Pedro-Pessoa"),"."))}m.isMDXComponent=!0}}]);